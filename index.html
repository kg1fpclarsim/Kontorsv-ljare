<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="UTF-8">
  <title>Sök kontor</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    input, button { padding: 8px; margin: 5px; }
    #result { margin-top: 15px; font-weight: bold; }
  </style>
</head>
<body>
  <h1>Sök kontor via Postnummer eller Postort</h1>

  <!-- Sökruta -->
  <input type="text" id="searchInput" placeholder="Ange postnummer eller ort">
  <button onclick="search()">Sök</button>

  <!-- Resultat -->
  <div id="result">CSV laddas in...</div>

  <script>
    let csvData = [];

    // HÄR anger du länken till din CSV på GitHub (raw-format!)
    const csvUrl = "https://raw.githubusercontent.com/<DITT_GITHUB_ANVÄNDARNAMN>/<DITT_REPO>/main/Schenker%20kontor.csv";

    // Hämta CSV från GitHub
    fetch(csvUrl)
      .then(response => response.text())
      .then(text => parseCSV(text))
      .catch(err => {
        document.getElementById('result').textContent = "Fel vid laddning av CSV: " + err;
      });

    // Enkel CSV-parser
    function parseCSV(text) {
      const rows = text.split(/\r?\n/).map(r => r.split(";"));
      const headers = rows[0];
      const postnummerIndex = headers.indexOf("Postnummer");
      const postortIndex = headers.indexOf("Postort");
      const kontorIndex = headers.indexOf("Kontor");

      csvData = rows.slice(1).map(row => ({
        postnummer: row[postnummerIndex],
        postort: row[postortIndex],
        kontor: row[kontorIndex]
      }));

      document.getElementById('result').textContent = "CSV laddad. Ange postnummer eller ort ovan.";
    }

    // Söker i data
    function search() {
      const query = document.getElementById('searchInput').value.trim().toLowerCase();
      if (!query) {
        document.getElementById('result').textContent = "Ange ett postnummer eller ort.";
        return;
      }

      const matches = csvData.filter(row =>
        (row.postnummer && row.postnummer.toLowerCase() === query) ||
        (row.postort && row.postort.toLowerCase() === query)
      );

      if (matches.length > 0) {
        const kontorLista = matches.map(m => m.kontor).join(", ");
        document.getElementById('result').textContent = "Kontor: " + kontorLista;
      } else {
        document.getElementById('result').textContent = "Ingen träff hittades.";
      }
    }
  </script>
</body>
</html>
